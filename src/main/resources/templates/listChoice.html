<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>选择题管理</title>
    <style type="text/css">
        #content{
            /*margin:20px auto;*/
        }
        *{
            margin:0;
            padding:0;
        }

        .seek {
            position: absolute;
            top: 0px;
            right: 0px;
        }
    </style>
    <link rel="stylesheet" href="../layui/css/layui.css">
    <script type="text/javascript" src="../layui/layui.js" ></script>
    <script type="text/javascript" src="../js/jquery-1.12.4.min.js" ></script>
</head>
<body>
    <div id="content">
<!--        <form class="layui-form searchDiv" action="" lay-filter="example">-->
<!--            <div class="layui-form-item" >-->
<!--                <div class="layui-layout layui-layout-admin">-->
<!--                    <div class="layui-header" style="background: deeppink">-->
<!--                        <div class="layui-logo" style="color: deepskyblue">视频管理</div>-->
<!--                        <br>-->
<!--                        <div style="position: absolute; top: 10px; right: 5px;">-->
<!--                            <div class="seek" style="position: absolute; top: 6px; right: 700px;">-->
<!--                                <label class="layui-form-label" style="color: #FFFFFF;">搜索</label>-->
<!--                            </div>-->
<!--                            <div class="layui-form-item" style="position: absolute; top: 5px; right: 510px;">-->
<!--                                <div class="layui-input-inline">-->
<!--                                    <input type="text"  id="title" lay-verify="required" placeholder="标题" autocomplete="off" class="layui-input">-->
<!--                                </div>-->
<!--                            </div>-->-
<!--                            <div class="layui-input-inline" style="position: absolute; top: 5px; right: 315px;">-->
<!--                                <select class="quiz1" id="teacher">-->
<!--                                    <option value="">请选择讲师</option>-->
<!--                                </select>-->
<!--                            </div>-->
<!--                            <div class="layui-input-inline" style="position: absolute; top: 5px; right: 120px;">-->
<!--                                <select class="quiz2" id="course">-->
<!--                                    <option value="">请选择课程</option>-->
<!--                                </select>-->
<!--                            </div>-->
<!--                        </div>-->
<!--                        <div style="position: absolute; top: 15px; right: 72px;">-->
<!--                            <button class="layui-btn layui-btn-normal " type="button" data-type="reload">-->
<!--                                <i class="layui-icon layui-icon-search"></i>-->
<!--                            </button>-->
<!--                        </div>-->
<!--                        <div style="position: absolute; top: 15px; right: 10px;">-->
<!--                            <button class="layui-btn layui-btn-normal" type="button" onclick="add()">-->
<!--                                <i class="layui-icon layui-icon-add-1"></i>-->
<!--                            </button>-->
<!--                        </div>-->
<!--                    </div>-->
<!--                </div>-->
<!--            </div>-->
<!--        </form>-->

        <table class="layui-hide" id="demo" lay-filter="test"></table>

        <script type="text/html" id="toolbarDemo">
            <div class="layui-btn-container">
                <button class="layui-btn layui-btn-sm" lay-event="deletes">批量删除</button>
                <button class="layui-btn layui-btn-sm" lay-event="getCheckLength">获取选中数目</button>
                <button class="layui-btn layui-btn-sm" lay-event="isAll">验证是否全选</button>
            </div>
        </script>

        <script type="text/html" id="barDemo">
            <a class="layui-btn layui-btn-xs" lay-event="edit">编辑</a>
            <a class="layui-btn layui-btn-danger layui-btn-xs" lay-event="del">删除</a>
        </script>

        <div class="layui-body">
            <!-- 内容主体区域 -->
        </div>

    </div>
    <script src="../layui/layui.js"></script>
    <script>
        //JavaScript代码区域
        layui.use(['laydate', 'laypage', 'layer', 'table', 'element'], function(){
            var laydate = layui.laydate //日期
                ,laypage = layui.laypage //分页
                ,layer = layui.layer //弹层
                ,table = layui.table //表格
                ,element = layui.element//元素操作

            //执行一个 table 实例
            table.render({
                elem: '#demo'
                ,id:"transferTable"// 父窗体table id
                ,height: 440
                ,url: 'examsys/title/choiceAll' //数据接口
                ,title: '用户表'
                ,toolbar: '#toolbarDemo'
                ,page: { //支持传入 laypage 组件的所有参数（某些参数除外，如：jump/elem） - 详见文档
                    layout: ['limit', 'count', 'prev', 'page', 'next', 'skip'] //自定义分页布局
                    // ,curr: 5 //设定初始在第 5 页
                    // ,groups: 1 //只显示 1 个连续页码
                    ,first: false //不显示首页
                    ,last: false //不显示尾页
                    ,limits:[5, 10, 20]
                } //开启分页
                ,cols: [[ //表头
                    {type: 'checkbox', fixed: 'left'}
                    ,{field:'cid', title:'序号', width:80, fixed: 'left', unresize: true, sort: true}
                    ,{field: 'score', title: '分数', width:200}
                    ,{field: 'question', title: '题目', width:300, sort: true}
                    ,{field: 'choiceA', title: '选项A', width:300, sort: true}
                    ,{field: 'choiceB', title: '选项B', width:300, sort: true}
                    ,{field: 'choiceC', title: '选项C', width:300, sort: true}
                    ,{field: 'choiceD', title: '选项D', width:300, sort: true}
                    ,{field: 'rightAnswer', title: '正确答案', width:300, sort: true}
                    ,{field: 'subjectId', title: '所属科目', width:300, sort: true}
                    ,{fixed: 'right', title:'操作', toolbar: '#barDemo', width:150}
                ]]
            });
            //头工具栏事件
            table.on('toolbar(test)', function(obj){
                var checkStatus = table.checkStatus(obj.config.id),
                    data = checkStatus.data;
                switch(obj.event){
                    case 'add':
                        layer.open({
                            type:2
                            , title: '添加信息'
                            , area:['800px', '500px']
                            , content: ''
                        })
                        break;
                    case 'getCheckLength':
                        var data = checkStatus.data;
                        layer.msg('选中了：'+ data.length + ' 个');
                        break;
                    case 'isAll':
                        layer.msg(checkStatus.isAll ? '全选': '未全选');
                        break;
                };
            });

            var active = {
                reload: function(){
                    //执行重载
                    table.reload('transferTable', {
                        page: {
                            curr: 1 //重新从第 1 页开始
                        }
                        ,where: { // 额外需要提交的参数
                            subject_name:$("#name").val()
                        }
                    });
                }
            };

            $('.searchDiv .layui-btn').on('click', function(){
                var type = $(this).data('type');
                active[type] ? active[type].call(this) : '';
            });
        });
    </script>
</body>
</html>